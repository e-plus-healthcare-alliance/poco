Recommender API
===================

功能：为用户提供个性化推荐。


简明教程
---------

JsSdk Demo页面 http://search.tuijianbao.net/sdk/demo/

需要在页面底部包含下面两个js文件::

    <script type="text/javascript" language="javascript" charset="utf-8" src="http://search.tuijianbao.net/sdk/js/api-1.6.js"></script>
    <script type="text/javascript" language="javascript" charset="utf-8" src="http://search.tuijianbao.net/sdk/skin/ui-1.6.js"></script>


API调用简单范例::

    <script type="text/javascript" language="javascript" >
        // 开发时可设置debug=true，此时提供的是系统预设的模拟数据，仅供开发使用。
        // 在正式网站上，debug要设置为false
        var debug = true;
        var p = new _poco("<API Key>", "http://<api server prefix>/api/v1.6", debug);

        // 这些是共享参数，每次对服务器的调用都会传送这些参数。
        p.addSharedParams({'item_id': 'K8900',
                           'user_id': 'U123',
                           'amount': '6'});

        // 这是一个浏览商品页的事件。
        p.addEvent({"event_type": "ViewItem"});

        //这是一个用户下单事件
        p.addEvent({"type": "PlaceOrder", "order_id": "O123", "order_content": "I123,1.50,2|I250,15.50,1"});

        // 这是一个用户自定义的事件（自定义事件不能和系统内置的事件同名，详见Recommender JS API文档）
        p.addEvent({"event_type": "CustomEvt1", "purchasing_amount": 15.0});

        // 这两个是对推荐接口的请求
        p.addRecommender({"type": "AlsoViewed"});
        p.addRecommender({"type": "ByHotIndex", "hot_index_type": "viewed", "category_id": "C1", "brand": "B25"});

        // 推荐请求的结果会回调这里设置的接口
        p.invoke("pCallback");
    </script>


_poco.addSharedParams
-------------------------

如果在此后一系列调用addEvent和addRecommender中，有若干参数是相同的，可以通过这种方式一次性指定。


_poco.addRecommender
--------------------------------

通用传入参数
^^^^^^^^^^^^^^

=================     ==========  ===============================   =============================================
参数名                是否必填    默认值                            描述
=================     ==========  ===============================   =============================================
type                  是                                            推荐类型，根据推荐类型不同，需要的其他入参也会不同。
amount                是                                            需要返回结果数
user_id               是                                            用户ID
api_key               是                                            分配给用户站点的api key
=================     ==========  ===============================   =============================================

推荐类型
^^^^^^^^^

推荐分为两种，一种是下列8种系统内置的推荐类型。另一种是为用户站点特别订制的推荐类型。

为好药师特别订制的类型包括:

1. /unit/home

说明：首页上为用户显示的推荐：首先根据用户的浏览历史推荐。如果根据用户浏览历史无法推荐出结果，则返回浏览排行榜。

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
user_id          是
=============    ==========  ===============================   =============================================


2. /unit/item

说明：在商品信息页上根据商品信息推荐相关商品，如果找不到相关商品，则推荐该商品的同分类中的其他热门浏览商品。如果该分类中其他热门浏览商品也找不到，则推荐全站热门浏览商品。

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
item_id          是                                            商品ID
=============    ==========  ===============================   =============================================

3. /unit/by_keywords

说明：根据提供的一组关键词搜索商品（只要有一个关键词匹配就返回）。如果没有任何结果，则根据用户的浏览历史推荐。如果根据用户浏览历史无法推荐出结果，则返回浏览排行榜。

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
keywords         是                                            需要匹配的关键词。关键词之间以逗号分隔。
=============    ==========  ===============================   =============================================



内置的推荐类型包括：

1. AlsoViewed

说明：看过此商品的用户也看过哪些商品

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
item_id          是                                            商品ID
=============    ==========  ===============================   =============================================

2. ByBrowsingHistory

说明：根据用户浏览历史推荐。

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
user_id          是                                            用户ID
=============    ==========  ===============================   =============================================


3. AlsoBought

说明：买过该商品的用户也买过哪些商品

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
item_id          是                                            商品ID
=============    ==========  ===============================   =============================================

4. BoughtTogether

说明：经常和该商品在一起购买的商品

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
item_id          是                                            商品ID
=============    ==========  ===============================   =============================================

5. UltimatelyBought

说明：看了该商品的用户最终购买哪些商品

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
item_id          是                                            商品ID
=============    ==========  ===============================   =============================================

6. ByPurchasingHistory

说明：根据购买历史推荐

7. ByShoppingCart

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
shopping_cart    否                                            购物车中商品的ID，以逗号分隔。
=============    ==========  ===============================   =============================================

8. ByHotIndex

说明：根据热门浏览/热门销售排行榜来推荐。如果category_id和brand都不填写，则返回总排行榜。(目前暂不支持同时指定分类和品牌

==============    ==========  ===============================   =============================================
参数名            是否必填    默认值                            描述
==============    ==========  ===============================   =============================================
hot_index_type    是                                            viewed: 取浏览排行榜；bought: 取购买排行榜
category_id       否                                            指定分类。
brand             否                                            指定品牌
==============    ==========  ===============================   =============================================



