Recommender JS API
===================

功能：用来在网页上集成用户行为跟踪和商品推荐功能。

简明教程
----------

JsSdk Demo页面 http://search.tuijianbao.net/sdk/demo/

在页面底部包含下面两个js文件::

    <script type="text/javascript" language="javascript" charset="utf-8" src="http://search.tuijianbao.net/sdk/js/api-1.6.js"></script>
    <script type="text/javascript" language="javascript" charset="utf-8" src="http://search.tuijianbao.net/sdk/skin/ui-1.6.js"></script>


API调用范例::

    <script type="text/javascript" language="javascript" >
        var debug = true;
        var p = new _poco("<API Key>", "http://<api server prefix>/api/v1.6", debug);
        p.addSharedParams('item_id', 'K8900');
        p.addSharedParams('user_id', 'U123');
        p.addSharedParams('amount', '6');

        p.addEvent({"event_type": "ViewItem"});
        p.addRecommender({"type": "AlsoViewed"});
        p.invoke("tjbCallback");
    </script>

_poco.addSharedParams
-------------------------

如果在此后一系列调用addEvent和addRecommender中，有若干参数是相同的，可以通过这种方式一次性指定。


_poco.addEvent参数列表
--------------------------

传入参数
^^^^^^^^^^^^^^

=================     ==========  ===============================   =============================================
参数名                是否必填    默认值                            描述
=================     ==========  ===============================   =============================================
event_type            是                                            事件类型，根据事件类型不同，需要的其他入参也会不同。
user_id               否                                            用户ID
item_id               是                                            商品ID
api_key               是                                            分配给用户站点的api key
=================     ==========  ===============================   =============================================


事件类型有如下几种：
    1. ViewItem: 用户浏览了该商品
    2. AddFavorite: 用户将该商品添加到收藏
    3. RemoveFavorite: 用户将该商品取消收藏
    4. RateItem: 用户给该商品打分
        * 另需要传入参数score
    5. AddOrderItem
        * 用户将商品添加到购物车中
    6. RemoveOrderItem
        * 用户将商品从购物车中移除


_poco.addRecommender
--------------------------------

通用传入参数
^^^^^^^^^^^^^^

=================     ==========  ===============================   =============================================
参数名                是否必填    默认值                            描述
=================     ==========  ===============================   =============================================
type                  是                                            推荐类型，根据推荐类型不同，需要的其他入参也会不同。
amount                是                                            需要返回结果数
user_id               是                                            用户ID
api_key               是                                            分配给用户站点的api key
=================     ==========  ===============================   =============================================

推荐类型
^^^^^^^^^

1. AlsoViewed

说明：看过此商品的用户也看过哪些商品

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
item_id          是                                            商品ID
=============    ==========  ===============================   =============================================

2. ByBrowsingHistory

说明：根据用户浏览历史推荐。

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
user_id          是                                            用户ID
=============    ==========  ===============================   =============================================


3. AlsoBought

说明：买过该商品的用户也买过哪些商品

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
item_id          是                                            商品ID
=============    ==========  ===============================   =============================================

4. BoughtTogether

说明：经常和该商品在一起购买的商品

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
item_id          是                                            商品ID
=============    ==========  ===============================   =============================================

5. UltimatelyBought

说明：看了该商品的用户最终购买哪些商品

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
item_id          是                                            商品ID
=============    ==========  ===============================   =============================================

6. ByPurchasingHistory

说明：根据购买历史推荐

7. ByShoppingCart

=============    ==========  ===============================   =============================================
参数名           是否必填    默认值                            描述
=============    ==========  ===============================   =============================================
shopping_cart    否                                            购物车中商品的ID，以逗号分隔。
=============    ==========  ===============================   =============================================
